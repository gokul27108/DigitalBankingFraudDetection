<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Fraud Detection Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet">

    <style>

        body {
            background: #f4f7fb;
            font-family: 'Segoe UI', sans-serif;
        }

        /* HEADER */
        .top-header {
            background: linear-gradient(90deg,#0a1931,#185adb);
            color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        /* GLASS CARD */
        .glass-card {
            background: rgba(255,255,255,0.75);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
        }

        /* STATS CARDS */
        .stat-box {
            border-radius: 15px;
            padding: 20px;
            color: white;
            font-weight: bold;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .blue { background: linear-gradient(45deg,#007bff,#00c6ff); }
        .red { background: linear-gradient(45deg,#ff416c,#ff4b2b); }
        .yellow { background: linear-gradient(45deg,#f7971e,#ffd200); color:black;}

        /* BUTTON */
        .btn-modern {
            background: linear-gradient(90deg,#007bff,#00c6ff);
            border: none;
            color: white;
            font-weight: bold;
            padding: 10px;
            border-radius: 10px;
        }

        .btn-modern:hover {
            transform: scale(1.02);
            opacity: 0.9;
        }

        /* TABLE */
        table {
            border-radius: 15px;
            overflow: hidden;
        }

        tbody tr:hover {
            background-color: #eef3ff;
            transition: 0.3s;
        }

    </style>
</head>

<body class="container mt-4">

<!-- HEADER -->
<div class="top-header mb-4">
    <h2>üè¶ Digital Banking Fraud Detection</h2>
    <p class="mb-0">Smart AI Fraud Monitoring Dashboard</p>
</div>

<!-- STATS -->
<div class="row mb-4">

    <div class="col-md-4">
        <div class="stat-box blue">
            Total Transactions
            <h3 th:text="${transactions.size()}">0</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="stat-box red">
            Fraud Detected
            <h3 th:text="${#lists.size(transactions.?[status=='FRAUD'])}">0</h3>
        </div>
    </div>

    <div class="col-md-4">
        <div class="stat-box yellow">
            Suspicious
            <h3 th:text="${#lists.size(transactions.?[status=='SUSPICIOUS'])}">0</h3>
        </div>
    </div>

</div>

<!-- FORM -->
<div class="glass-card mb-4">
    <h5 class="mb-3">‚ûï Simulate Transaction</h5>

    <form action="/transaction/create" method="post">

        <input type="text" name="accountNumber"
               class="form-control mb-2"
               placeholder="Account Number" required>

        <input type="number" name="amount"
               class="form-control mb-2"
               placeholder="Amount" required>

        <input type="text" name="location"
               class="form-control mb-3"
               placeholder="Location" required>

        <button type="submit" class="btn-modern w-100">
            Simulate Transaction
        </button>

    </form>
</div>

<!-- FRAUD REPORT BUTTON -->
<div class="mb-3">
    <a href="/fraud-report" class="btn btn-danger">
        üö® View Fraud Report
    </a>
</div>

<!-- TABLE -->
<div class="glass-card">
    <h5 class="mb-3">üìã Recent Transactions</h5>

    <table class="table table-hover align-middle">

        <thead class="table-dark">
        <tr>
            <th>Account</th>
            <th>Amount</th>
            <th>Location</th>
            <th>Status</th>
            <th>Risk</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="tx : ${transactions}">

            <td th:text="${tx.accountNumber}"></td>
            <td>‚Çπ <span th:text="${tx.amount}"></span></td>
            <td th:text="${tx.location}"></td>

            <td>
                <span th:text="${tx.status}"
                      th:classappend="
                        ${tx.status == 'FRAUD'} ? 'badge bg-danger' :
                        (${tx.status == 'SUSPICIOUS'} ? 'badge bg-warning text-dark' :
                        'badge bg-success')">
                </span>
            </td>

            <td th:text="${tx.riskScore}"></td>

        </tr>
        </tbody>

    </table>
</div>

</body>
</html>
